# Ripple

非常方便地实现点击时涟漪动画效果

:::demo 基本用法

将`Ripple`放在想要使用涟漪效果的容器中，配合一定的样式就可以很方便地实现点击时涟漪动画效果

```jsx
import React from 'react'
import { Ripple } from 'xl-vision'

export default () => {
  return (
    <div className='box'>
      click me
      <Ripple transitionClasses='ripple' />
    </div>
  )
}
```

```scss
.box {
  position: relative;
  height: 100px;
  background-color: #eee;
  color: #80bdff;
  font-size: 26px;
  text-align: center;
  line-height: 100px;

  &::deep {
    .xl-ripple {
      opacity: 0.3;
    }
    .ripple-enter-active,
    .ripple-leave-active {
      transition: all 0.4s ease;
    }
    .ripple-enter,
    .ripple-leave-to {
      transform: scale(0);
      opacity: 0.1;
    }
    .ripple-enter-to,
    .ripple-leave {
      transform: scale(1);
      opacity: 0.3;
    }
  }
}
```

:::

:::demo 强制进场动画结束再触发出场动画

通过设置`leaveAfterEnter`，可以等到进场动画结束时才触发出场动画。

在一些我们需要进场动画完整展示时使用，比如`Button`中需要完整的涟漪效果，即使我们快速点击和取消。

您可以通过快速点击，和上面例子对比，看看动画的变化。

```jsx
import React from 'react'
import { Ripple } from 'xl-vision'

export default () => {
  return (
    <div className='box'>
      click me
      <Ripple leaveAfterEnter transitionClasses='ripple' />
    </div>
  )
}
```

```scss
.box {
  position: relative;
  height: 100px;
  background-color: #eee;
  color: #80bdff;
  font-size: 26px;
  text-align: center;
  line-height: 100px;

  &::deep {
    .xl-ripple {
      opacity: 0.3;
    }
    .ripple-enter-active,
    .ripple-leave-active {
      transition: all 0.4s ease;
    }
    .ripple-enter,
    .ripple-leave-to {
      transform: scale(0);
      opacity: 0.1;
    }
    .ripple-enter-to,
    .ripple-leave {
      transform: scale(1);
      opacity: 0.3;
    }
  }
}
```

:::

:::demo 自定义触发方式

通过传递 ref，可以轻松获取到`start`和`stop`方法，这两个方法就可以用来自定义触发方式。

```jsx
import React from 'react'
import { Ripple } from 'xl-vision'

export default () => {
  const ref = React.useRef()
  const keydownRef = React.useRef(false)

  React.useEffect(() => {
    const keyDown = (e) => {
      if (!keydownRef.current && e.key === 'Enter') {
        ref.current.start()
        keydownRef.current = true
      }
    }
    const keyUp = (e) => {
      if (keydownRef.current && e.key === 'Enter') {
        ref.current.stop()
        keydownRef.current = false
      }
    }

    document.body.addEventListener('keydown', keyDown)
    document.body.addEventListener('keyup', keyUp)

    return () => {
      document.body.removeEventListener('keydown', keyDown)
      document.body.removeEventListener('keyup', keyUp)
    }
  }, [])

  return (
    <div className='box'>
      press key enter
      <Ripple ref={ref} transitionClasses='ripple' />
    </div>
  )
}
```

```scss
.box {
  position: relative;
  height: 100px;
  background-color: #eee;
  color: #80bdff;
  font-size: 26px;
  text-align: center;
  line-height: 100px;

  &::deep {
    .xl-ripple {
      opacity: 0.3;
    }
    .ripple-enter-active,
    .ripple-leave-active {
      transition: all 0.4s ease;
    }
    .ripple-enter,
    .ripple-leave-to {
      transform: scale(0);
      opacity: 0.1;
    }
    .ripple-enter-to,
    .ripple-leave {
      transform: scale(1);
      opacity: 0.3;
    }
  }
}
```

:::

## Ripple API

| 参数 | 说明 | 类型 | 可选值 | 默认值 | 是否必填 |
| --- | --- | --- | --- | --- | --- |
| clsPrefix | 自定义类名前缀 | string | - | - | false |
| transitionClasses | 自定义动画过渡 class | string &#x007c; object | - | - | false |
| leaveAfterEnter | 是否进场动画结束后再开始出场动画，而不是在取消动画时就结束 | boolean | - | - | false |
| disableEvents | 禁用默认的事件行为 | boolean | - | false | false |
